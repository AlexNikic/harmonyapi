version: '3.3'

services:
   api:
     image: harmonydata/harmonyapi:latest
     depends_on:
       - tika
     ports:
       - "8000:80"
     restart: always
     environment:
       HARMONY_DATA_PATH: /data
       HUGGING_FACE_SENTENCE_TRANSFORMER_MINILM_L12_V2_PATH: /data/paraphrase-multilingual-MiniLM-L12-v2
       HUGGING_FACE_SENTENCE_TRANSFORMER_MPNET_BASE_V2_PATH: /data/paraphrase-multilingual-mpnet-base-v2
       OPENAI_API_KEY:
       GOOGLE_APPLICATION_CREDENTIALS_B64:
       GOOGLE_PROJECT_ID:
       TIKA_SERVER_ENDPOINT: http://tika:9998
     volumes:
        - harmonyapimount:/data

   tika:
     image: apache/tika:2.8.0.0-full
     ports:
       - "9998:9998"
     restart: always 
